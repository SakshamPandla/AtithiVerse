{% extends "base.html" %}

{% block title %}{{ destination.name }} - AtithiVerse{% endblock %}

{% block extra_css %}
<link href="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.css" rel="stylesheet">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-gradient: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        --secondary-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --success-gradient: linear-gradient(135deg, #11998e 0%, #38ef7d 100%);
        --warning-gradient: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
        --dark-gradient: linear-gradient(135deg, #2c3e50 0%, #3498db 100%);
        --gold-gradient: linear-gradient(135deg, #f39c12 0%, #f1c40f 100%);
        --hero-overlay: linear-gradient(135deg, rgba(30, 60, 114, 0.85) 0%, rgba(42, 82, 152, 0.9) 100%);
    }

    body {
        font-family: 'Poppins', sans-serif;
        line-height: 1.6;
        color: #2c3e50;
    }

    /* ===== ENHANCED HERO SECTION ===== */
    .hero-section {
        height: 65vh;
        background: var(--dark-gradient);
        display: flex;
        align-items: center;
        color: white;
        position: relative;
        overflow: hidden;
        margin-top: -80px;
        padding-top: 80px;
    }

    .hero-bg-pattern {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: 
            radial-gradient(circle at 25% 25%, rgba(255,255,255,0.02) 0%, transparent 50%),
            radial-gradient(circle at 75% 75%, rgba(255,255,255,0.02) 0%, transparent 50%);
        z-index: 0;
    }

    .hero-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: var(--hero-overlay);
        z-index: 1;
    }

    .hero-content {
        position: relative;
        z-index: 2;
        width: 100%;
    }

    .hero-layout {
        display: flex;
        align-items: center;
        gap: 60px;
        max-width: 1400px;
        margin: 0 auto;
    }

    .hero-image-container {
        flex: 0 0 480px;
        position: relative;
    }

    .image-frame {
        position: relative;
        border-radius: 25px;
        overflow: hidden;
        box-shadow: 
            0 30px 60px rgba(0,0,0,0.4),
            0 0 0 1px rgba(255,255,255,0.1);
        transition: all 0.4s ease;
        background: linear-gradient(45deg, #667eea, #764ba2);
        padding: 3px;
    }

    .image-frame:hover {
        transform: scale(1.02) translateY(-10px) rotateY(2deg);
        box-shadow: 
            0 40px 80px rgba(0,0,0,0.5),
            0 0 0 1px rgba(255,255,255,0.2);
    }

    .hero-destination-image {
        width: 100%;
        height: 340px;
        object-fit: cover;
        border-radius: 22px;
        transition: transform 0.4s ease;
    }

    .image-overlay {
        position: absolute;
        top: 3px;
        left: 3px;
        right: 3px;
        bottom: 3px;
        background: linear-gradient(45deg, rgba(102,126,234,0.8), rgba(118,75,162,0.8));
        border-radius: 22px;
        display: flex;
        align-items: center;
        justify-content: center;
        opacity: 0;
        transition: opacity 0.4s ease;
        cursor: pointer;
    }

    .image-frame:hover .image-overlay {
        opacity: 1;
    }

    .image-overlay i {
        font-size: 3rem;
        color: white;
        transform: scale(0.8);
        transition: transform 0.3s ease;
    }

    .image-frame:hover .image-overlay i {
        transform: scale(1);
    }

    .hero-text-container {
        flex: 1;
        padding-left: 30px;
    }

    .destination-badge {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: var(--gold-gradient);
        padding: 10px 25px;
        border-radius: 30px;
        font-size: 0.9rem;
        font-weight: 600;
        margin-bottom: 1.5rem;
        box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4);
        border: 2px solid rgba(255,255,255,0.2);
        animation: pulse-glow 3s ease-in-out infinite;
    }

    @keyframes pulse-glow {
        0%, 100% { box-shadow: 0 8px 25px rgba(243, 156, 18, 0.4); }
        50% { box-shadow: 0 8px 35px rgba(243, 156, 18, 0.6); }
    }

    .hero-title {
        font-size: 4.2rem;
        font-weight: 900;
        margin-bottom: 1rem;
        text-shadow: 0 8px 32px rgba(0,0,0,0.5);
        line-height: 1.1;
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 50%, #e9ecef 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        letter-spacing: -1px;
    }

    .hero-location {
        display: flex;
        align-items: center;
        gap: 12px;
        font-size: 1.4rem;
        margin-bottom: 1.8rem;
        opacity: 0.95;
        font-weight: 500;
    }

    .hero-location i {
        font-size: 1.3rem;
        color: #3498db;
        filter: drop-shadow(0 4px 8px rgba(52, 152, 219, 0.4));
    }

    .rating-display {
        background: rgba(255,255,255,0.12);
        backdrop-filter: blur(20px);
        border-radius: 40px;
        padding: 18px 35px;
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 2rem;
        border: 2px solid rgba(255,255,255,0.15);
        box-shadow: 0 12px 35px rgba(0,0,0,0.2);
        max-width: fit-content;
    }

    .rating-stars {
        display: flex;
        align-items: center;
        gap: 6px;
    }

    .rating-stars i {
        color: #f39c12;
        font-size: 1.3rem;
        filter: drop-shadow(0 3px 6px rgba(243, 156, 18, 0.5));
        transition: transform 0.3s ease;
    }

    .rating-stars:hover i {
        transform: scale(1.1) rotate(15deg);
    }

    .rating-text {
        font-weight: 700;
        font-size: 1.2rem;
        color: #ffffff;
    }

    .rating-count {
        font-weight: 500;
        font-size: 1rem;
        color: rgba(255,255,255,0.8);
    }

    .hero-description {
        font-size: 1.3rem;
        line-height: 1.7;
        margin-bottom: 2.2rem;
        opacity: 0.95;
        max-width: 580px;
        text-shadow: 0 3px 12px rgba(0,0,0,0.3);
        font-weight: 400;
    }

    .feature-pills {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
        margin-bottom: 2.8rem;
    }

    .feature-pill {
        background: rgba(255,255,255,0.15);
        backdrop-filter: blur(15px);
        border: 2px solid rgba(255,255,255,0.2);
        color: white;
        padding: 12px 25px;
        border-radius: 35px;
        font-size: 0.95rem;
        font-weight: 600;
        text-shadow: 0 2px 8px rgba(0,0,0,0.3);
        transition: all 0.4s ease;
        display: flex;
        align-items: center;
        gap: 10px;
        position: relative;
        overflow: hidden;
    }

    .feature-pill::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s ease;
    }

    .feature-pill:hover {
        background: rgba(255,255,255,0.25);
        transform: translateY(-3px);
        box-shadow: 0 12px 25px rgba(0,0,0,0.3);
        border-color: rgba(255,255,255,0.4);
    }

    .feature-pill:hover::before {
        left: 100%;
    }

    .feature-pill i {
        font-size: 0.9rem;
        color: #27ae60;
        filter: drop-shadow(0 2px 6px rgba(39, 174, 96, 0.4));
    }

    .hero-actions {
        display: flex;
        gap: 20px;
        flex-wrap: wrap;
    }

    .btn-hero-primary {
        background: var(--secondary-gradient);
        border: none;
        padding: 16px 40px;
        border-radius: 35px;
        color: white;
        font-weight: 600;
        font-size: 1.1rem;
        box-shadow: 0 12px 30px rgba(240, 147, 251, 0.4);
        transition: all 0.4s ease;
        display: flex;
        align-items: center;
        gap: 12px;
        position: relative;
        overflow: hidden;
    }

    .btn-hero-primary::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s ease;
    }

    .btn-hero-primary:hover {
        transform: translateY(-4px);
        box-shadow: 0 16px 40px rgba(240, 147, 251, 0.6);
        color: white;
    }

    .btn-hero-primary:hover::before {
        left: 100%;
    }

    .btn-hero-outline {
        background: rgba(255,255,255,0.1);
        border: 2px solid rgba(255,255,255,0.3);
        padding: 14px 38px;
        border-radius: 35px;
        color: white;
        font-weight: 600;
        font-size: 1.1rem;
        backdrop-filter: blur(15px);
        transition: all 0.4s ease;
        display: flex;
        align-items: center;
        gap: 12px;
        position: relative;
        overflow: hidden;
    }

    .btn-hero-outline::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
        transition: left 0.6s ease;
    }

    .btn-hero-outline:hover {
        background: rgba(255,255,255,0.2);
        border-color: rgba(255,255,255,0.5);
        transform: translateY(-4px);
        box-shadow: 0 12px 25px rgba(0,0,0,0.3);
        color: white;
    }

    .btn-hero-outline:hover::before {
        left: 100%;
    }

    /* ===== FLOATING DECORATIONS ===== */
    .hero-decoration {
        position: absolute;
        border-radius: 50%;
        z-index: 1;
        animation: float 12s ease-in-out infinite;
    }

    .hero-decoration:nth-child(3) {
        top: 10%;
        right: 8%;
        width: 160px;
        height: 160px;
        background: radial-gradient(circle, rgba(52, 152, 219, 0.08) 0%, transparent 70%);
    }

    .hero-decoration:nth-child(4) {
        bottom: 15%;
        left: 5%;
        width: 120px;
        height: 120px;
        background: radial-gradient(circle, rgba(46, 204, 113, 0.08) 0%, transparent 70%);
        animation-delay: -6s;
    }

    .hero-decoration:nth-child(5) {
        top: 45%;
        right: 15%;
        width: 80px;
        height: 80px;
        background: radial-gradient(circle, rgba(241, 196, 15, 0.08) 0%, transparent 70%);
        animation-delay: -3s;
    }

    @keyframes float {
        0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
            opacity: 0.6;
        }
        50% { 
            transform: translateY(-25px) rotate(180deg); 
            opacity: 1;
        }
    }

    /* ===== MAIN CONTENT STYLES ===== */
    .main-content {
        background: linear-gradient(180deg, #f8f9fa 0%, #ffffff 100%);
        margin-top: -50px;
        position: relative;
        z-index: 3;
        border-radius: 50px 50px 0 0;
        padding: 80px 0 60px;
    }

    .info-card {
        border: none;
        border-radius: 25px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        transition: all 0.4s ease;
        overflow: hidden;
        background: white;
        margin-bottom: 30px;
    }

    .info-card:hover {
        transform: translateY(-8px);
        box-shadow: 0 20px 50px rgba(0,0,0,0.12);
    }

    .card-header-custom {
        background: var(--primary-gradient);
        color: white;
        border: none;
        padding: 25px 30px;
        position: relative;
        overflow: hidden;
    }

    .card-header-custom::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
        transform: translateX(-100%);
        transition: transform 0.6s ease;
    }

    .info-card:hover .card-header-custom::before {
        transform: translateX(100%);
    }

    .card-header-custom h2 {
        font-weight: 700;
        font-size: 1.5rem;
    }

    .guide-card {
        border: none;
        border-radius: 25px;
        box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        transition: all 0.4s ease;
        height: 100%;
        overflow: hidden;
        background: white;
        position: relative;
    }

    .guide-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 4px;
        background: var(--primary-gradient);
        transform: scaleX(0);
        transition: transform 0.4s ease;
    }

    .guide-card:hover {
        transform: translateY(-12px);
        box-shadow: 0 25px 50px rgba(0,0,0,0.15);
    }

    .guide-card:hover::before {
        transform: scaleX(1);
    }

    .guide-avatar {
        width: 100px;
        height: 100px;
        border-radius: 50%;
        object-fit: cover;
        border: 4px solid #f8f9fa;
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
        transition: all 0.4s ease;
    }

    .guide-card:hover .guide-avatar {
        border-color: #667eea;
        transform: scale(1.05);
    }

    .rating-stars {
        color: #f39c12;
    }

    .contact-btn {
        background: var(--primary-gradient);
        border: none;
        border-radius: 30px;
        padding: 12px 25px;
        color: white;
        text-decoration: none;
        display: inline-flex;
        align-items: center;
        gap: 10px;
        font-weight: 600;
        transition: all 0.4s ease;
        box-shadow: 0 6px 20px rgba(102,126,234,0.3);
        position: relative;
        overflow: hidden;
    }

    .contact-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s ease;
    }

    .contact-btn:hover {
        transform: translateY(-3px);
        color: white;
        box-shadow: 0 10px 30px rgba(102,126,234,0.4);
    }

    .contact-btn:hover::before {
        left: 100%;
    }

    .contact-btn.email {
        background: var(--secondary-gradient);
        box-shadow: 0 6px 20px rgba(240,147,251,0.3);
    }

    .contact-btn.email:hover {
        box-shadow: 0 10px 30px rgba(240,147,251,0.4);
    }

    .experience-card {
        border: none;
        border-radius: 20px;
        box-shadow: 0 6px 25px rgba(0,0,0,0.08);
        margin-bottom: 25px;
        overflow: hidden;
        transition: all 0.4s ease;
        background: white;
        border-left: 5px solid transparent;
    }

    .experience-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.12);
        border-left-color: #667eea;
    }

    .sidebar-card {
        border: none;
        border-radius: 25px;
        box-shadow: 0 8px 30px rgba(0,0,0,0.08);
        margin-bottom: 30px;
        overflow: hidden;
        background: white;
        transition: all 0.4s ease;
    }

    .sidebar-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.12);
    }

    .price-highlight {
        background: var(--primary-gradient);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
        font-weight: 800;
    }

    .testimonial-card {
        background: linear-gradient(135deg, #f8f9fa, #e9ecef);
        border-left: 4px solid #f39c12;
        border-radius: 15px;
    }

    .feature-tag {
        background: var(--primary-gradient);
        color: white;
        padding: 8px 18px;
        border-radius: 25px;
        font-size: 0.85rem;
        font-weight: 600;
        margin: 4px;
        display: inline-block;
        box-shadow: 0 4px 15px rgba(102,126,234,0.3);
    }

    .btn-gradient {
        background: var(--primary-gradient);
        border: none;
        border-radius: 30px;
        padding: 14px 35px;
        color: white;
        font-weight: 600;
        transition: all 0.4s ease;
        box-shadow: 0 6px 20px rgba(102,126,234,0.3);
        position: relative;
        overflow: hidden;
    }

    .btn-gradient::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
        transition: left 0.6s ease;
    }

    .btn-gradient:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 30px rgba(102,126,234,0.4);
        color: white;
    }

    .btn-gradient:hover::before {
        left: 100%;
    }

    .back-btn {
        position: fixed;
        bottom: 30px;
        right: 30px;
        width: 70px;
        height: 70px;
        border-radius: 50%;
        background: var(--primary-gradient);
        border: none;
        color: white;
        font-size: 1.4rem;
        box-shadow: 0 8px 25px rgba(102,126,234,0.4);
        transition: all 0.4s ease;
        z-index: 1000;
        display: none;
    }

    .back-btn:hover {
        transform: scale(1.1) translateY(-5px);
        box-shadow: 0 15px 35px rgba(102,126,234,0.5);
        color: white;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 1400px) {
        .hero-layout {
            gap: 40px;
        }
        
        .hero-image-container {
            flex: 0 0 420px;
        }
        
        .hero-destination-image {
            height: 300px;
        }
    }

    @media (max-width: 1200px) {
        .hero-layout {
            gap: 30px;
        }
        
        .hero-image-container {
            flex: 0 0 380px;
        }
        
        .hero-destination-image {
            height: 280px;
        }
        
        .hero-title {
            font-size: 3.5rem;
        }
    }

    @media (max-width: 992px) {
        .hero-section {
            height: auto;
            min-height: 70vh;
            padding: 120px 0 60px;
        }
        
        .hero-layout {
            flex-direction: column;
            text-align: center;
            gap: 50px;
        }
        
        .hero-image-container {
            flex: none;
            width: 100%;
            max-width: 450px;
            margin: 0 auto;
        }
        
        .hero-text-container {
            padding-left: 0;
        }
        
        .hero-title {
            font-size: 3.2rem;
        }
        
        .hero-description {
            max-width: none;
        }
        
        .rating-display {
            margin: 0 auto 2rem;
        }
        
        .feature-pills {
            justify-content: center;
        }
        
        .hero-actions {
            justify-content: center;
        }
    }

    @media (max-width: 768px) {
        .hero-section {
            padding: 100px 0 50px;
            min-height: 60vh;
        }
        
        .hero-image-container {
            max-width: 350px;
        }
        
        .hero-destination-image {
            height: 250px;
        }
        
        .hero-title {
            font-size: 2.8rem;
        }
        
        .hero-location {
            font-size: 1.2rem;
        }
        
        .hero-description {
            font-size: 1.1rem;
        }
        
        .rating-display {
            padding: 15px 30px;
            gap: 15px;
        }
        
        .hero-actions {
            flex-direction: column;
            gap: 15px;
            align-items: center;
        }
        
        .btn-hero-primary,
        .btn-hero-outline {
            width: 100%;
            max-width: 300px;
            justify-content: center;
        }
        
        .hero-decoration {
            display: none;
        }
        
        .main-content {
            margin-top: -30px;
            border-radius: 30px 30px 0 0;
            padding: 60px 0 40px;
        }
    }

    @media (max-width: 576px) {
        .hero-layout {
            gap: 35px;
        }
        
        .hero-image-container {
            max-width: 300px;
        }
        
        .hero-destination-image {
            height: 220px;
        }
        
        .hero-title {
            font-size: 2.2rem;
        }
        
        .feature-pill {
            padding: 10px 20px;
            font-size: 0.85rem;
        }
        
        .btn-hero-primary,
        .btn-hero-outline {
            padding: 14px 30px;
            font-size: 1rem;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- Stunning Enhanced Hero Section -->
<section class="hero-section">
    <!-- Background Pattern -->
    <div class="hero-bg-pattern"></div>
    
    <!-- Gradient Overlay -->
    <div class="hero-overlay"></div>
    
    <!-- Floating Decorations -->
    <div class="hero-decoration"></div>
    <div class="hero-decoration"></div>
    <div class="hero-decoration"></div>
    
    <div class="container">
        <div class="hero-content">
            <div class="hero-layout" data-aos="fade-up">
                <!-- Enhanced Destination Image -->
                <div class="hero-image-container" data-aos="zoom-in" data-aos-delay="200">
                    <div class="image-frame">
                        <img src="{{ destination.image }}" 
                             alt="{{ destination.name }}" 
                             class="hero-destination-image"
                             loading="eager">
                        <div class="image-overlay" onclick="openImageModal('{{ destination.image }}')">
                            <i class="fas fa-search-plus"></i>
                        </div>
                    </div>
                </div>
                
                <!-- Enhanced Text Content -->
                <div class="hero-text-container" data-aos="fade-left" data-aos-delay="400">
                    <div class="destination-badge" data-aos="fade-down" data-aos-delay="500">
                        <i class="fas fa-crown me-2"></i>UNESCO World Heritage
                    </div>
                    
                    <h1 class="hero-title" data-aos="fade-up" data-aos-delay="600">
                        {{ destination.name }}
                    </h1>
                    
                    <div class="hero-location" data-aos="fade-up" data-aos-delay="700">
                        <i class="fas fa-map-marker-alt"></i>
                        <span>{{ destination.location or destination.location_string }}</span>
                    </div>
                    
                    <div class="rating-display" data-aos="fade-up" data-aos-delay="800">
                        <div class="rating-stars">
                            {% for i in range(5) %}
                                {% if i < destination.rating %}
                                    <i class="fas fa-star"></i>
                                {% else %}
                                    <i class="far fa-star"></i>
                                {% endif %}
                            {% endfor %}
                        </div>
                        <span class="rating-text">{{ destination.rating }}</span>
                        <span class="rating-count">{{ destination.reviews or destination.reviews_count }} reviews</span>
                    </div>
                    
                    <p class="hero-description" data-aos="fade-up" data-aos-delay="900">
                        {{ destination.description }}
                    </p>
                    
                    {% if destination.features %}
                    <div class="feature-pills" data-aos="fade-up" data-aos-delay="1000">
                        {% for feature in destination.features[:4] %}
                        <span class="feature-pill">
                            <i class="fas fa-check"></i>{{ feature }}
                        </span>
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <div class="hero-actions" data-aos="fade-up" data-aos-delay="1100">
                        <button class="btn btn-hero-primary" onclick="planVisit()">
                            <i class="fas fa-calendar-alt me-2"></i>Plan Your Visit
                        </button>
                        <button class="btn btn-hero-outline" onclick="toggleWishlist({{ destination.id }})">
                            <i class="fas fa-heart me-2"></i>Add to Wishlist
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Enhanced Main Content -->
<div class="main-content">
    <div class="container">
        <!-- Image Gallery -->
        {% if destination.images and destination.images|length > 1 %}
        <div class="image-gallery" data-aos="fade-up">
            {% for image in destination.images[1:] %}
            <img src="{{ image }}" alt="{{ destination.name }}" class="gallery-img w-100" onclick="openImageModal('{{ image }}')">
            {% endfor %}
        </div>
        {% endif %}

        <div class="row">
            <!-- Main Content Column -->
            <div class="col-lg-8">
                <!-- About Section -->
                <div class="info-card" data-aos="fade-right">
                    <div class="card-header-custom">
                        <h2 class="mb-0">
                            <i class="fas fa-info-circle me-2"></i>About {{ destination.name }}
                        </h2>
                    </div>
                    <div class="card-body p-4">
                        <p class="fs-6 lh-lg">{{ destination.long_description or destination.description }}</p>
                    </div>
                </div>

                <!-- Local Guides Section -->
                {% if destination.local_guides %}
                <div class="info-card" data-aos="fade-right" data-aos-delay="100">
                    <div class="card-header-custom">
                        <h2 class="mb-0">
                            <i class="fas fa-user-tie me-2"></i>Local Expert Guides
                        </h2>
                    </div>
                    <div class="card-body p-4">
                        <div class="row">
                            {% for guide in destination.local_guides %}
                            <div class="col-md-6 mb-4">
                                <div class="guide-card p-4">
                                    <div class="d-flex align-items-center mb-3">
                                        <img src="{{ guide.image }}" alt="{{ guide.name }}" class="guide-avatar me-3" loading="lazy">
                                        <div>
                                            <h5 class="mb-1 fw-bold">{{ guide.name }}</h5>
                                            <div class="rating-stars">
                                                {% for i in range(5) %}
                                                    {% if i < guide.rating %}
                                                        <i class="fas fa-star"></i>
                                                    {% else %}
                                                        <i class="far fa-star"></i>
                                                    {% endif %}
                                                {% endfor %}
                                                <span class="ms-1">{{ guide.rating }} ({{ guide.reviews_count }})</span>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <p class="text-muted mb-3">{{ guide.description }}</p>
                                    
                                    <div class="mb-3">
                                        <div class="row">
                                            <div class="col-12 mb-2">
                                                <strong>Experience:</strong> <span class="text-primary">{{ guide.experience }}</span>
                                            </div>
                                            <div class="col-12 mb-2">
                                                <strong>Languages:</strong> {{ ', '.join(guide.languages) }}
                                            </div>
                                            <div class="col-12">
                                                <strong>Specialties:</strong> {{ ', '.join(guide.specialties) }}
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex justify-content-between align-items-center mb-3">
                                        <div>
                                            <span class="fs-4 fw-bold price-highlight">₹{{ guide.price_per_hour }}</span>
                                            <small class="text-muted">/hour</small>
                                        </div>
                                    </div>
                                    
                                    <div class="d-flex gap-2 mb-3">
                                        <a href="tel:{{ guide.contact.phone }}" class="contact-btn flex-fill text-center">
                                            <i class="fas fa-phone"></i>Call
                                        </a>
                                        <a href="mailto:{{ guide.contact.email }}" class="contact-btn email flex-fill text-center">
                                            <i class="fas fa-envelope"></i>Email
                                        </a>
                                    </div>
                                    
                                    <!-- Testimonial -->
                                    {% if guide.testimonials %}
                                    <div class="testimonial-card p-3 rounded">
                                        <small class="text-muted">
                                            <i class="fas fa-quote-left me-1"></i>
                                            "{{ guide.testimonials[0].comment }}"
                                            <br><strong class="text-primary">- {{ guide.testimonials[0].user }}</strong>
                                        </small>
                                    </div>
                                    {% endif %}
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Special Experiences -->
                {% if destination.experiences %}
                <div class="info-card" data-aos="fade-right" data-aos-delay="200">
                    <div class="card-header-custom">
                        <h2 class="mb-0">
                            <i class="fas fa-star me-2"></i>Special Experiences
                        </h2>
                    </div>
                    <div class="card-body p-4">
                        {% for experience in destination.experiences %}
                        <div class="experience-card">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <h5 class="fw-bold text-primary">{{ experience.name }}</h5>
                                        <p class="text-muted mb-2">{{ experience.description }}</p>
                                        <div class="mb-2">
                                            <i class="fas fa-clock text-primary me-2"></i>{{ experience.duration }}
                                        </div>
                                        <div class="small text-muted">
                                            <strong>Includes:</strong> {{ ', '.join(experience.includes) }}
                                        </div>
                                    </div>
                                    <div class="col-md-4 text-md-end">
                                        <div class="fs-3 fw-bold price-highlight mb-2">₹{{ experience.price }}</div>
                                        <button class="btn btn-gradient" onclick="bookExperience('{{ experience.name }}', {{ experience.price }})">
                                            <i class="fas fa-calendar-plus me-2"></i>Book Now
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Travel Tips -->
                {% if destination.travel_tips %}
                <div class="info-card" data-aos="fade-right" data-aos-delay="300">
                    <div class="card-header-custom">
                        <h2 class="mb-0">
                            <i class="fas fa-lightbulb me-2"></i>Travel Tips
                        </h2>
                    </div>
                    <div class="card-body p-4">
                        <div class="row">
                            {% for tip in destination.travel_tips %}
                            <div class="col-md-6 mb-3">
                                <div class="d-flex">
                                    <i class="fas fa-check-circle text-success me-2 mt-1"></i>
                                    <span>{{ tip }}</span>
                                </div>
                            </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>

            <!-- Enhanced Sidebar -->
            <div class="col-lg-4">
                <!-- Pricing Information -->
                <div class="sidebar-card" data-aos="fade-left">
                    <div class="card-body p-4">
                        <h5 class="card-title fw-bold mb-3">
                            <i class="fas fa-rupee-sign text-primary me-2"></i>Pricing Information
                        </h5>
                        <div class="mb-3">
                            <strong>Starting from:</strong> 
                            <span class="fs-4 fw-bold price-highlight">₹{{ destination.price }}</span>
                        </div>
                        {% if destination.pricing %}
                            {% if destination.pricing.indian_citizens %}
                            <div class="mb-2">
                                <strong>Indian Citizens:</strong> ₹{{ destination.pricing.indian_citizens }}
                            </div>
                            {% endif %}
                            {% if destination.pricing.foreign_nationals %}
                            <div class="mb-2">
                                <strong>Foreign Nationals:</strong> ₹{{ destination.pricing.foreign_nationals }}
                            </div>
                            {% endif %}
                        {% endif %}
                    </div>
                </div>

                <!-- Timings & Hours -->
                {% if destination.timings %}
                <div class="sidebar-card" data-aos="fade-left" data-aos-delay="100">
                    <div class="card-body p-4">
                        <h5 class="card-title fw-bold mb-3">
                            <i class="fas fa-clock text-primary me-2"></i>Timings & Hours
                        </h5>
                        <div class="mb-2">
                            <strong>Opens:</strong> {{ destination.timings.opening }}
                        </div>
                        <div class="mb-2">
                            <strong>Closes:</strong> {{ destination.timings.closing }}
                        </div>
                        {% if destination.timings.closed_on %}
                        <div class="mb-2">
                            <strong>Closed on:</strong> {{ ', '.join(destination.timings.closed_on) }}
                        </div>
                        {% endif %}
                        <div class="alert alert-info">
                            <i class="fas fa-sun text-warning me-1"></i>{{ destination.timings.best_time }}
                        </div>
                    </div>
                </div>
                {% endif %}

                <!-- Nearby Attractions -->
                {% if destination.nearby_attractions %}
                <div class="sidebar-card" data-aos="fade-left" data-aos-delay="200">
                    <div class="card-body p-4">
                        <h5 class="card-title fw-bold mb-3">
                            <i class="fas fa-map-marker text-primary me-2"></i>Nearby Attractions
                        </h5>
                        {% for attraction in destination.nearby_attractions %}
                        <div class="d-flex justify-content-between align-items-center mb-3 p-3 bg-light rounded-3">
                            <div>
                                <div class="fw-semibold">{{ attraction.name }}</div>
                                <small class="text-muted">
                                    <i class="fas fa-route me-1"></i>{{ attraction.distance }} • {{ attraction.travel_time }}
                                </small>
                            </div>
                            {% if attraction.entry_fee %}
                            <small class="badge bg-primary rounded-pill">{{ attraction.entry_fee }}</small>
                            {% endif %}
                        </div>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- Quick Actions -->
                <div class="sidebar-card" data-aos="fade-left" data-aos-delay="300">
                    <div class="card-body p-4 text-center">
                        <button class="btn btn-gradient btn-lg w-100 mb-3" onclick="toggleWishlist({{ destination.id }})">
                            <i class="fas fa-heart me-2"></i>Add to Wishlist
                        </button>
                        <button class="btn btn-outline-primary w-100 mb-3" onclick="shareDestination()">
                            <i class="fas fa-share me-2"></i>Share Destination
                        </button>
                        <button class="btn btn-outline-secondary w-100" onclick="window.history.back()">
                            <i class="fas fa-arrow-left me-2"></i>Go Back
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Enhanced Back to Top Button -->
<button class="back-btn" onclick="scrollToTop()" title="Back to Top">
    <i class="fas fa-arrow-up"></i>
</button>

<!-- Enhanced Image Modal -->
<div class="modal fade" id="imageModal" tabindex="-1">
    <div class="modal-dialog modal-xl modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-body p-0">
                <img id="modalImage" src="" alt="" class="w-100 h-100" style="object-fit: cover; max-height: 80vh;">
                <button type="button" class="btn-close position-absolute top-0 end-0 m-3" 
                        data-bs-dismiss="modal" style="background: rgba(0,0,0,0.7); border-radius: 50%; color: white;"></button>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="https://cdnjs.cloudflare.com/ajax/libs/aos/2.3.4/aos.js"></script>
<script>
    // Initialize AOS animations
    AOS.init({
        duration: 1000,
        once: true,
        offset: 100
    });

    // Image modal functionality
    function openImageModal(imageSrc) {
        document.getElementById('modalImage').src = imageSrc;
        new bootstrap.Modal(document.getElementById('imageModal')).show();
    }

    // Plan visit functionality
    function planVisit() {
        showToast('Planning your visit... (Feature coming soon!)', 'info');
    }

    // Enhanced wishlist functionality
    async function toggleWishlist(destinationId) {
        try {
            const response = await fetch('/api/wishlist', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    destination_id: destinationId
                })
            });

            const data = await response.json();

            if (data.success) {
                showToast(data.message, 'success');
            } else {
                if (data.message.includes('Authentication required')) {
                    showToast('Please login to add items to wishlist', 'warning');
                    setTimeout(() => {
                        window.location.href = '/login';
                    }, 2000);
                } else {
                    showToast(data.message, 'error');
                }
            }
        } catch (error) {
            console.error('Error:', error);
            showToast('Error updating wishlist', 'error');
        }
    }

    // Enhanced share functionality
    function shareDestination() {
        if (navigator.share) {
            navigator.share({
                title: '{{ destination.name }} - AtithiVerse',
                text: '{{ destination.description }}',
                url: window.location.href
            });
        } else {
            // Fallback: copy to clipboard
            navigator.clipboard.writeText(window.location.href).then(() => {
                showToast('Link copied to clipboard!', 'success');
            });
        }
    }

    // Book experience functionality
    function bookExperience(experienceName, price) {
        showToast(`Booking ${experienceName} for ₹${price}... (Feature coming soon!)`, 'info');
    }

    // Smooth scroll to top
    function scrollToTop() {
        window.scrollTo({
            top: 0,
            behavior: 'smooth'
        });
    }

    // Enhanced toast notification system
    function showToast(message, type = 'info') {
        // Create toast container if it doesn't exist
        let toastContainer = document.getElementById('toast-container');
        if (!toastContainer) {
            toastContainer = document.createElement('div');
            toastContainer.id = 'toast-container';
            toastContainer.className = 'toast-container position-fixed top-0 end-0 p-3';
            toastContainer.style.zIndex = '1080';
            document.body.appendChild(toastContainer);
        }

        // Create enhanced toast element
        const toast = document.createElement('div');
        toast.className = `toast align-items-center text-white bg-${type === 'error' ? 'danger' : type === 'warning' ? 'warning' : type === 'success' ? 'success' : 'primary'} border-0`;
        toast.setAttribute('role', 'alert');
        toast.style.borderRadius = '15px';
        toast.style.boxShadow = '0 8px 25px rgba(0,0,0,0.2)';
        toast.innerHTML = `
            <div class="d-flex">
                <div class="toast-body">
                    <i class="fas fa-${type === 'error' ? 'times-circle' : type === 'warning' ? 'exclamation-triangle' : type === 'success' ? 'check-circle' : 'info-circle'} me-2"></i>
                    ${message}
                </div>
                <button type="button" class="btn-close btn-close-white me-2 m-auto" data-bs-dismiss="toast"></button>
            </div>
        `;

        toastContainer.appendChild(toast);

        // Show toast with bootstrap
        const bsToast = new bootstrap.Toast(toast, {
            autohide: true,
            delay: 4000
        });
        bsToast.show();

        // Remove toast element after it's hidden
        toast.addEventListener('hidden.bs.toast', () => {
            toast.remove();
        });
    }

    // Enhanced back to top button visibility
    window.addEventListener('scroll', function() {
        const backBtn = document.querySelector('.back-btn');
        if (window.scrollY > 400) {
            backBtn.style.display = 'block';
        } else {
            backBtn.style.display = 'none';
        }
    });

    // Add loading animation on page load
    window.addEventListener('load', function() {
        document.body.style.opacity = '0';
        document.body.style.transition = 'opacity 0.5s ease';
        setTimeout(() => {
            document.body.style.opacity = '1';
        }, 100);
    });
</script>
{% endblock %}
